// src/menus/rawChang.js
// 已平坦化並支援「大」「小」前後綴混用偵測，以及「加」「➕」加料變體
const raw = {
  // 粥品
  congee: { '魚肚粥':135,'半塊魚肚粥':85,'魚肉粥':85,'魚肉＋魚皮粥':85,'魚肉＋蚵粥':85,'蚵仔粥':85,'魚皮粥':85,'魚皮＋蚵粥':85,'海鮮粥':85,'綜合粥':85 },
  // 湯品
  soups:  { '魚肚湯':125,'半塊魚肚湯':75,'魚肉湯':70,'魚肉+魚皮湯':70,'魚肉+蚵湯':70,'蚵仔湯':70,'魚皮湯':70,'魚皮+蚵湯':70,'海鮮湯':70,'綜合湯':70,'蛤蜊湯':70,'魚丸湯':35 },
  // 鍋燒系列
  hotpot: { '鍋燒意麵':80,'鍋燒雞絲麵':80,'鍋燒烏龍麵':80,'鍋燒冬粉':80 },
  // 飯品
  rice:   { '肉燥飯小':30,'肉燥飯大':40,'肉燥魚鬆飯小':40,'肉燥魚鬆飯大':50,'小肉燥魚鬆飯':40,'大肉燥魚鬆飯':50,'梅干爌肉飯':80,'香煎魚肚飯':130,'香煎魚腸飯':90,'香煎魚排飯':90,'白飯':15,'乾拌麵線':35 },
  // 小菜
  sides:  { '燙魷魚':65,'滷豬小腸':65,'香煎魚肚':135,'香煎魚腸':75,'香煎魚肉':75,'香煎魚皮':75,'燙魚肚':125,'燙蚵仔':65,'燙魚皮':65,'滷筍干':35,'滷虱目魚頭':20,'荷包蛋':15,'魯蛋':10,'油豆腐':10,'燙青菜':35,'特製老油條':30 },
  // 飲料
  drinks: { '紅茶':25,'紅茶牛奶':35 },
  // 加料
  addOns: { '麵':15,'肉片':25,'蚵':35,'魚肉':35,'魚皮':35,'魚丸':35,'油條':20 }
};

// 平坦化並添加「大」「小」「加」「➕」前後綴對應
const flat = {};
function addItem(name, price) {
  // 原名稱
  flat[name] = price;
  // 大／小 前後綴
  const m1 = name.match(/^(.+?)(大|小)$/);
  if (m1) flat[m1[2] + m1[1]] = price;
  const m2 = name.match(/^(大|小)(.+)$/);
  if (m2) flat[m2[2] + m2[1]] = price;
  // 加／➕ 前後綴（針對加料詞彙）
  ['加', '➕'].forEach(sym => {
    flat[sym + name] = price;
    flat[name + sym] = price;
  });
}
Object.values(raw).forEach(cat => {
  Object.entries(cat).forEach(([n, p]) => addItem(n, p));
});
module.exports = flat;
